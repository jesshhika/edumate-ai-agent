{% extends "base.html" %}
{% block title %}Planner - EduMate{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/planner.css') }}">
{% endblock %}

{% block content %}
<div class="planner-page">
  <h2>Study Planner</h2>

  <!-- Planner Form -->
  <form method="POST" class="form-card planner-form">
    <label for="start_date">Start Date</label>
    <input type="date" id="start_date" name="start_date" required>

    <label for="end_date">End Date</label>
    <input type="date" id="end_date" name="end_date" required>

    <label for="plan_text">Topic / Goal</label>
    <textarea id="plan_text" name="plan_text" rows="3" placeholder="e.g., Machine Learning basics, algorithms..."></textarea>

    <label class="check-inline">
      <input type="checkbox" name="use_ai"> Let AI generate plan
    </label>

    <button type="submit" class="btn">Generate & Save Plan</button>
  </form>

  <!-- Plans List -->
  <div class="plans-list">
    <h3>Your Plans</h3>
    {% if plans %}
      {% for plan in plans %}
        <div class="card plan-card">
          <h4>{{ plan.date }}</h4>
          <div class="plan-content">
            <div class="plan-preview">{{ plan.plan_text[:200]|safe }}{% if plan.plan_text|length > 200 %}...{% endif %}</div>
          </div>
          <div class="plan-actions">
            <a href="{{ url_for('view_plan', plan_id=plan.id) }}" class="btn">View Full Plan</a>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <p class="muted">No plans saved yet.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
