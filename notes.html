{% extends "base.html" %}
{% block title %}Notes - EduMate{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/notes.css') }}">
{% endblock %}

{% block content %}
<div class="notes-page">
  <h2>Notes</h2>

  <!-- Upload Form -->
  <form method="POST" enctype="multipart/form-data" class="form-card notes-form">
    <label for="title">Title</label>
    <input type="text" name="title" id="title" placeholder="Enter note title" required>

    <label for="pdf_file">Upload PDF</label>
    <input type="file" name="pdf_file" id="pdf_file" accept="application/pdf">

    <label for="content">Or paste text</label>
    <textarea name="content" id="content" rows="5" placeholder="Enter your notes here..."></textarea>

    <button type="submit" class="btn">Save Note</button>
  </form>

  <!-- Summary Display -->
  {% if summary %}
    <div class="summary-card">
      <h3>ðŸ“„ Summary</h3>
      <div class="summary-content">
        {{ summary }}
      </div>
    </div>
  {% endif %}

  <!-- Notes List -->
  <div class="notes-list">
    <h3>Your Notes</h3>
    {% if notes %}
      <div class="cards-container">
        {% for n in notes %}
          <div class="card">
            <h4>{{ n.title }}</h4>
            <small>{{ n.created_at or 'Recently added' }}</small>
            <div class="card-actions">
              <a href="{{ url_for('view_note', note_id=n.id) }}" class="btn">View Details</a>
              {% if n.source_pdf %}
                <a href="{{ url_for('uploaded_file', filename=n.source_pdf) }}" target="_blank" class="btn ghost">ðŸ“„ PDF</a>
              {% endif %}
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="muted">No notes added yet.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
